//- Individual icon
mixin icon(iconClass)
  span(class='icon #{iconClass}')

//- Suite of icons 
mixin icons(iconClasses)
  - for (var i = 0; i < iconClasses.length; ++i) {
      - var iconClass = iconClasses[i];
      - if  (i == 0) { iconClass += ' first'} 
      - if  (i == (iconClasses.length - 1)) { iconClass += ' last'} 
    +icon(iconClass)
  -}

//-http://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers
mixin noCache
  meta(http-equiv='cache-control', content='max-age=0')
  meta(http-equiv='cache-control', content='no-cache')
  meta(http-equiv='expires', content='0')
  meta(http-equiv='expires', content='Tue, 01 Jan 1980 1:00:00 GMT')
  meta(http-equiv='pragma', content='no-cache')
  

mixin list(data, ulClass, liClass)
  ul(class='#{ulClass}')
  - for (var i = 0; i < data.length; ++i) {
      li(class='#{liClass}')
  - }
  
mixin placeHolderImg(data)
  - if (undefined == data) { data = {}; }
  - if (undefined == data.imgWidth) { data.imgWidth = '300'; }
  - if (undefined == data.imgFormat) { data.imgFormat = '4:3'; }
  - if (undefined == data.bkColor) { data.bkColor = 'EEEEEE'; }
  - if (undefined == data.txColor) { data.txColor = 'CCCCCC'; }
  - if (undefined == data.service) { data.url = 'http://dummyimage.com/'; }
  - if (undefined == data.imgClasses) {  data.imgClasses = ''; }
  
  - url = data.url + data.imgWidth + 'x' + data.imgFormat + '/' + data.bkColor + '/' + data.txColor;
  img(src="#{url}", class="#{data.imgClasses}")

//- https://github.com/sinsunsan/archiref_wiki/wiki/jade-recipes
//- https://github.com/visionmedia/jade/issues/833
mixin json()
  - var oldbuf = buf; buf = [];
  block
  - var res = JSON.stringify(JSON.parse(buf.join('')));
  - buf = oldbuf;
  != res


